<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebFragments Demo</title>
    <!-- Development importmap - will be ignored in production -->
    <script type="importmap" data-development>
      {
        "imports": {
          "react": "/node_modules/react/index.js",
          "react-dom": "/node_modules/react-dom/index.js",
          "react-dom/client": "/node_modules/react-dom/client.js",
          "react-router": "/node_modules/react-router/dist/index.js",
          "react-router-dom": "/node_modules/react-router-dom/dist/index.js",
          "@remix-run/router": "/node_modules/@remix-run/router/dist/router.js",
          "scheduler": "/node_modules/scheduler/index.js"
        }
      }
    </script>
    <!-- Production importmap -->
    <script type="importmap" data-production>
      {
        "imports": {
          "react": "https://ga.jspm.io/npm:react@18.2.0/index.js",
          "react-dom": "https://ga.jspm.io/npm:react-dom@18.2.0/index.js",
          "react-dom/client": "https://ga.jspm.io/npm:react-dom@18.2.0/client.js",
          "react-router": "https://ga.jspm.io/npm:react-router@6.22.3/dist/index.js",
          "react-router-dom": "https://ga.jspm.io/npm:react-router-dom@6.22.3/dist/index.js",
          "@remix-run/router": "https://ga.jspm.io/npm:@remix-run/router@1.15.3/dist/router.js",
          "scheduler": "https://ga.jspm.io/npm:scheduler@0.23.0/index.js"
        }
      }
    </script>
    <!-- Start Single Page Apps for GitHub Pages -->
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>
    <!-- End Single Page Apps for GitHub Pages -->
    <script>
      // Determine environment
      const isDev = !window.location.href.includes('github.io');

      // Select the appropriate importmap based on environment
      const importmaps = document.querySelectorAll('script[type="importmap"]');
      importmaps.forEach(map => {
        if ((isDev && map.hasAttribute('data-development')) || 
            (!isDev && map.hasAttribute('data-production'))) {
          map.removeAttribute('data-development');
          map.removeAttribute('data-production');
        } else {
          map.remove();
        }
      });
    </script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      }
      #root {
        min-height: 100vh;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html> 